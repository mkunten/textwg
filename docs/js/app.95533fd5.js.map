{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Tei.vue?1548","webpack:///./src/App.vue?f7c9","webpack:///./src/App.vue","webpack:///./src/App.vue?8ecf","webpack:///./src/store/index.js","webpack:///./src/views/Home.vue","webpack:///./src/components/ImageViewer.vue","webpack:///./src/components/Mirador3.vue","webpack:///./src/components/Mirador3.vue?640f","webpack:///./src/components/TextViewer.vue","webpack:///./src/components/Tei.vue","webpack:///./src/components/Tei.vue?32f6","webpack:///./src/components/TextViewer.vue?0938","webpack:///./src/components/ImageViewer.vue?5491","webpack:///./src/views/Home.vue?f63c","webpack:///./src/router/index.js","webpack:///./src/i18n/locale/ja.js","webpack:///./src/main.js","webpack:///./src/components/TeiApp.vue?1401","webpack:///./src/components/Mirador3.vue?4bd2","webpack:///./src/components/ImageViewer.vue?7ad0","webpack:///./src/components/TeiApp.vue","webpack:///./src/components/TeiApp.vue?66ff","webpack:///./src/components/TeiNodes.vue","webpack:///./src/components/TeiNodes.vue?e9d7"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","id","script","__exports__","render","createStore","state","m3","bid","selectedText","m3Param","texts","provider","items","title","manifestURI","xmls","label","uri","getters","mutations","setM3","console","info","setSelectedText","text","setSelectedTextTeiData","teiData","setM3Param","actions","commit","class","options","optionLabel","optionGroupChildren","optionGroupLabel","layout","layoutOptions","optionValue","option","slotProps","icon","mirador-id","miradorId","props","computed","this","$store","methods","getM3Window","windowId","store","getState","windows","getM3ManifestJSON","manifests","manifestId","json","initM3","Mirador","viewer","language","sideBarOpenByDefault","setM3Text","dispatch","addWindow","updateWindow","setM3CanvasById","setCanvas","setM3CanvasByFrame","frame","sequences","canvases","mounted","watch","handler","deep","error","visible","visibleRight","position","closeButton","multiple","activeIndex","lazy","header","content","selectedXML","target","href","decodeURIComponent","jsonPrettify","ref","tabActiveIndex","onTabChanged","xml","style","selectedXMLData","el","elements","parents","components","TeiNodes","type","default","required","Array","debug","setTimeout","$el","parentNode","scrollWidth","scrollLeft","Accordion","AccordionTab","Card","SideBar","ScrollPanel","TabPanel","TabView","Tei","selectedXMLIndex","xmlData","teiElementID","undefined","getCanvasById","resetText","xmlLoaded","$nextTick","event","index","loadXML","a","response","xml2js","ignoreDeclaration","ignoreInstruction","ignoreComment","xmlJsAddIDs","els","maps","xmlJsToMapByTagname","e0","elementID","forEach","e1","xmlJsGetObjectByTagname","tagname","xmlJsGetObjectsByTagnameInit","xmlJsGetObjectsByTagname","walk","obj","map","attributes","xmlJsToText","json2xml","spaces","fullTagEmptyElement","indentCdata","indentAttributes","reduce","xmlJsToTextWalk","prev","curr","idx","DropDown","Splitter","SplitterPanel","Mirador3","TextViewer","set","ImageViewer","routes","path","component","Home","router","createRouter","history","createWebHistory","process","accept","reject","choose","upload","cancel","dayNames","dayNamesShort","dayNamesMin","monthNames","monthNamesShort","today","clear","weekHeader","firstDayOfWeek","dateFormat","weak","medium","strong","passwordPrompt","createApp","App","use","mdiVue","icons","mdijs","PrimeVue","locale","ja","Button","InputText","SelectButton","mount","lem","toggleOlp","size","childParents","formatLabel","wit","rdgs","OverlayPanel","$props","concat","find","filter","$refs","op","toggle","TeiApp","setup","mdicon","elRef","parentsRef","className","renderChild","jumpToByCanvasId","canvasId","jumpToByFacs","facs","test","parseInt","RegExp","$1","vnodes","onClick","e","preventDefault"],"mappings":"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","file":"js/app.95533fd5.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/textwg/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Tei.vue?vue&type=style&index=0&id=671819ce&scoped=true&lang=css\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=57cf298c&lang=scss\"","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<style lang=\"scss\">\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n\n#nav {\n  padding: 30px;\n\n  a {\n    font-weight: bold;\n    color: #2c3e50;\n\n    &.router-link-exact-active {\n      color: #42b983;\n    }\n  }\n}\n</style>\n","import { render } from \"./App.vue?vue&type=template&id=57cf298c\"\nconst script = {}\n\nimport \"./App.vue?vue&type=style&index=0&id=57cf298c&lang=scss\"\n\nimport exportComponent from \"/home/mkunten/dev/src/github.com/mkunten/textwg/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createStore } from 'vuex';\n\nexport default createStore({\n  state: {\n    m3: null,\n    bid: null,\n\n    selectedText: {},\n    m3Param: {},\n    texts: [{\n      provider: 'NIJL',\n      items: [{\n        title: '十六夜日記 corrected',\n        manifestURI: 'https://kotenseki.nijl.ac.jp/biblio/200003074/manifest',\n        xmls: [{\n          label: '上',\n          // uri: 'https://raw.githubusercontent.com/TEI-EAJ/jpn_classical/master/%E2%91%A1%E6%A0%A1%E8%A8%82%E6%9C%AC%E6%96%87%E3%83%87%E3%83%BC%E3%82%BF%E5%9B%BD%E6%96%87%E5%AD%A6%E7%A0%94%E7%A9%B6%E8%B3%87%E6%96%99%E9%A4%A8%E6%89%80%E8%94%B5%E3%80%8E%E5%8D%81%E5%85%AD%E5%A4%9C%E7%89%A9%E8%AA%9E%E3%80%8F%E4%B8%8A%E5%B7%BB.xml',\n          uri: 'texts/200003074.xml',\n        }, {\n          label: '下',\n          uri: 'https://raw.githubusercontent.com/TEI-EAJ/jpn_classical/master/%E2%91%A1%E6%A0%A1%E8%A8%82%E6%9C%AC%E6%96%87%E3%83%87%E3%83%BC%E3%82%BF%E5%9B%BD%E6%96%87%E5%AD%A6%E7%A0%94%E7%A9%B6%E8%B3%87%E6%96%99%E9%A4%A8%E6%89%80%E8%94%B5%E3%80%8E%E5%8D%81%E5%85%AD%E5%A4%9C%E7%89%A9%E8%AA%9E%E3%80%8F%E4%B8%8B%E5%B7%BB.xml',\n        }],\n      }, {\n        title: '源氏物語',\n        manifestURI: 'https://nakamura196.github.io/jpsearch/data/genji/manifest/01.json',\n        xmls: [{\n          label: '第1冊',\n          uri: 'https://tei-eaj.github.io/parallel_text_viewer/data/pt/01.xml',\n        }],\n      }],\n    }, {\n      provider: 'KU-ORCAS',\n      items: [{\n        title: '廣瀬本万葉集',\n        manifestURI: 'https://www.iiif.ku-orcas.kansai-u.ac.jp/iiif/books/210464810/manifest.json',\n        xmls: [{\n          label: '210464810',\n          uri: 'https://raw.githubusercontent.com/KU-ORCAS/manyoshuTEI/main/manyo_hirose_v02_85_140a.xml',\n        }],\n      }],\n    }],\n  },\n  getters: {\n  },\n  mutations: {\n    setM3(state, m3) {\n      state.m3 = m3;\n      console.info('store: setM3:', m3);\n    },\n    setSelectedText(state, text) {\n      state.selectedText = text;\n      console.info('store: setSelectedText:', state.selectedText);\n    },\n    setSelectedTextTeiData(state, teiData) {\n      state.selectedText.teiData = teiData;\n      console.info('store: setSelectedTextTeiData:', state.selectedText);\n    },\n    setM3Param(state, m3Param) {\n      state.m3Param = m3Param;\n      console.info('store: setM3Param:', m3Param);\n    },\n  },\n  actions: {\n    setM3Param({ commit }, m3Param) {\n      commit('setM3Param', m3Param);\n    },\n    setSelectedTextTeiData({ commit }, teiData) {\n      commit('setSelectedTextTeiData', teiData);\n    },\n  },\n});\n","<template>\n  <p class=\"fixed top-0 right-0\">v20220217001</p>\n  <ImageViewer />\n</template>\n\n<script>\nimport ImageViewer from '@/components/ImageViewer.vue';\n\nexport default {\n  name: 'Home',\n  components: {\n    ImageViewer,\n  },\n};\n</script>\n","<template>\n  <DropDown v-model=\"selectedText\"\n    :options=\"texts\" optionLabel=\"title\"\n    optionGroupChildren=\"items\" optionGroupLabel=\"provider\">\n  </DropDown>\n  <SelectButton v-model=\"layout\"\n    :options=\"layoutOptions\" optionValue=\"value\">\n    <template #option=\"slotProps\">\n      <mdicon :name=\"slotProps.option.icon\" />\n    </template>\n  </SelectButton>\n  <Splitter :layout=\"layout\">\n    <SplitterPanel>\n      <div class=\"miradorviewer\">\n        <Mirador3 mirador-id=\"mirador\" />\n      </div>\n    </SplitterPanel>\n    <SplitterPanel>\n      <div class=\"textviewer\">\n        <TextViewer />\n      </div>\n    </SplitterPanel>\n  </Splitter>\n</template>\n\n<script>\nimport DropDown from 'primevue/dropdown';\nimport Splitter from 'primevue/splitter';\nimport SplitterPanel from 'primevue/splitterpanel';\nimport Mirador3 from '@/components/Mirador3.vue';\nimport TextViewer from '@/components/TextViewer.vue';\n\nexport default {\n  name: 'ImageViewer',\n  components: {\n    DropDown,\n    Splitter,\n    SplitterPanel,\n    Mirador3,\n    TextViewer,\n  },\n  data() {\n    return {\n      layout: 'horizontal',\n      layoutOptions: [{\n        icon: 'view-split-vertical',\n        value: 'horizontal',\n      }, {\n        icon: 'view-split-horizontal',\n        value: 'vertical',\n      }],\n    };\n  },\n  computed: {\n    selectedText: {\n      get() {\n        return this.$store.state.selectedText;\n      },\n      set(text) {\n        this.$store.commit('setSelectedText', text);\n      },\n    },\n    texts() {\n      return this.$store.state.texts;\n    },\n  },\n  mounted() {\n    this.$nextTick(() => {\n      [this.selectedText] = this.texts[0].items;\n    });\n  },\n};\n</script>\n\n<style scoped>\n.p-splitter-panel {\n  overflow-x: hidden;\n}\n\n.imageviewer {\n  width: 100%;\n  height: 600px;\n  border: 1px solid black;\n  overflow: hidden;\n}\n\n.miradorviewer {\n  position: relative;\n  height: 100%;\n}\n\n.textviewer {\n  position: relative;\n  max-width: 95%;\n  height: 100%;\n}\n</style>\n","<template>\n  <div :id=\"this.miradorId\" class=\"mirador\"></div>\n</template>\n\n<script>\nexport default {\n  name: 'Mirador3',\n  props: [\n    'miradorId',\n  ],\n  data() {\n    return {\n    };\n  },\n  computed: {\n    m3() {\n      return this.$store.state.m3;\n    },\n    selectedText() {\n      return this.$store.state.selectedText;\n    },\n    texts() {\n      return this.$store.state.texts;\n    },\n    m3Param() {\n      return this.$store.state.m3Param;\n    },\n  },\n  methods: {\n    getM3Window(windowId = 'windowDefault') {\n      return this.m3.store.getState().windows[windowId];\n    },\n    getM3ManifestJSON(windowId = 'windowDefault') {\n      const state = this.m3.store.getState();\n      return state.manifests[state.windows[windowId].manifestId].json;\n    },\n    initM3() {\n      const m3 = window.Mirador.viewer({\n        language: 'ja',\n        id: this.miradorId,\n        window: {\n          sideBarOpenByDefault: false,\n        },\n      });\n      this.$store.commit('setM3', m3);\n      window.m3 = m3; // for debugging\n    },\n    setM3Text(text, windowId = 'windowDefault') {\n      if (this.getM3Window(windowId) !== null) {\n        this.m3.store.dispatch(window.Mirador.actions\n          .addWindow({ id: windowId, manifestId: text.manifestURI }));\n      } else {\n        console.info('m3 update');\n        this.m3.store.dispatch(window.Mirador.actions\n          .updateWindow(windowId, { manifestId: text.manifestURI }));\n      }\n    },\n    setM3CanvasById(id, windowId = 'windowDefault') {\n      this.m3.store.dispatch(window.Mirador.actions\n        .setCanvas(windowId, id));\n    },\n    setM3CanvasByFrame(frame, windowId = 'windowDefault') {\n      this.setM3CanvasById(this.getM3ManifestJSON(windowId)\n        .sequences[0].canvases[frame]['@id']);\n    },\n  },\n  mounted() {\n    this.initM3();\n  },\n  watch: {\n    selectedText: {\n      handler(text) {\n        this.setM3Text(text);\n      },\n      deep: true,\n    },\n    m3Param: {\n      handler(m3Param) {\n        switch (m3Param.key) {\n          case 'frame':\n            this.setM3CanvasByFrame(m3Param.value);\n            break;\n          case 'canvasId':\n            this.setM3CanvasById(m3Param.value);\n            break;\n          default:\n            console.error('unexpected setParam key');\n        }\n      },\n      deep: true,\n    },\n  },\n};\n</script>\n\n<style scoped>\n.mirador {\n  width: 100%;\n  height: 100%;\n  min-width: 480px;\n  min-height: 300px;\n}\n</style>\n","import { render } from \"./Mirador3.vue?vue&type=template&id=8b3f6038&scoped=true\"\nimport script from \"./Mirador3.vue?vue&type=script&lang=js\"\nexport * from \"./Mirador3.vue?vue&type=script&lang=js\"\n\nimport \"./Mirador3.vue?vue&type=style&index=0&id=8b3f6038&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/mkunten/dev/src/github.com/mkunten/textwg/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8b3f6038\"]])\n\nexport default __exports__","<template>\n  <SideBar v-model:visible=\"visibleRight\" position=\"right\"\n    closeButton=\"ture\">\n    <Accordion multiple :activeIndex=\"[0,1]\" lazy>\n      <AccordionTab header=\"XML Metadata\">\n        <Card>\n          <template #title>\n            <span class=\"text-sm\">Label</span>\n          </template>\n          <template #content>\n            <span class=\"text-sm\">{{ this.selectedXML.label }}</span>\n          </template>\n        </Card>\n        <Card>\n          <template #title>\n            <span class=\"text-sm\">XML URI</span>\n          </template>\n          <template #content>\n            <span class=\"text-sm\">\n              <a target=\"_blank\"\n                :href=\"this.selectedXML.uri\">\n                {{ decodeURIComponent(this.selectedXML.uri) }}\n              </a>\n            </span>\n          </template>\n        </Card>\n      </AccordionTab>\n      <AccordionTab header=\"TEI Header\">\n        <Card>\n          <template #content>\n          <pre>{{ this.jsonPrettify(this\n            .xmlJsGetObjectByTagname('teiHeader')) }}</pre>\n          </template>\n        </Card>\n      </AccordionTab>\n    </Accordion>\n  </SideBar>\n  <div>\n    <span>{{ this.selectedText.title }}</span>\n    <mdicon name=\"menu\" class=\"absolute right-0\"\n      @click=\"this.visibleRight = !this.visibleRight\" />\n  </div>\n  <TabView ref=\"tv\" v-model:activeIndex=\"tabActiveIndex\"\n    @tab-change=\"onTabChanged\">\n    <TabPanel v-for=\"xml in selectedText.xmls\"\n      :key=\"xml.label\" :header=\"xml.label\">\n      <ScrollPanel :ref=\"'sp' + xml.label\"\n        style=\"width: 100%; height: 100%;\">\n        <Tei\n          v-if=\"this.selectedXMLData\"\n          :el=\"this.selectedXMLData.elements[0].elements[1]\"\n        >\n        </Tei>\n      </ScrollPanel>\n    </TabPanel>\n  </TabView>\n</template>\n\n<script>\nimport axios from 'axios';\nimport xmlJs from 'xml-js';\nimport Accordion from 'primevue/accordion';\nimport AccordionTab from 'primevue/accordiontab';\nimport Card from 'primevue/card';\nimport ScrollPanel from 'primevue/scrollpanel';\nimport SideBar from 'primevue/sidebar';\nimport TabPanel from 'primevue/tabpanel';\nimport TabView from 'primevue/tabview';\nimport Tei from '@/components/Tei.vue';\n\nexport default {\n  name: 'TextViewer',\n  components: {\n    Accordion,\n    AccordionTab,\n    Card,\n    SideBar,\n    ScrollPanel,\n    TabPanel,\n    TabView,\n    Tei,\n  },\n  data() {\n    return {\n      visibleRight: false,\n      tabActiveIndex: 0,\n      selectedXMLIndex: null,\n      xmlData: {}, // key: xml uri; value: xml2json object\n      teiData: {}, // key: xml uri; value: { els: {}, maps: {} },\n      teiElementID: 0,\n    };\n  },\n  computed: {\n    m3() {\n      return this.$store.state.m3;\n    },\n    selectedText() {\n      return this.$store.state.selectedText;\n    },\n    selectedXML() {\n      if (this.selectedXMLIndex === null) {\n        return null;\n      }\n      return this.selectedText.xmls[this.selectedXMLIndex];\n    },\n    selectedXMLData() {\n      if (this.selectedXML === null\n        || this.xmlData[this.selectedXML.uri] === undefined) {\n        return null;\n      }\n      return this.xmlData[this.selectedXML.uri];\n    },\n  },\n  methods: {\n    getCanvasById(id) {\n      return this.$store.getters.getCanvasById(id);\n    },\n    resetText() {\n      this.xmlLoaded = [];\n      this.selectedXMLIndex = null;\n      this.tabActiveIndex = 0;\n      this.$nextTick(() => {\n        this.selectedXMLIndex = 0;\n      });\n    },\n    onTabChanged(event) {\n      this.selectedXMLIndex = event.index;\n    },\n    async loadXML() {\n      const { uri } = this.selectedText.xmls[this.selectedXMLIndex];\n      if (!this.selectedXMLData) {\n        try {\n          const response = await axios.get(uri);\n          const data = xmlJs.xml2js(response.data, {\n            ignoreDeclaration: true,\n            ignoreInstruction: true,\n            ignoreComment: true,\n          });\n          this.xmlJsAddIDs(data);\n          this.xmlData[uri] = data;\n          this.teiData[uri] = { els: {}, maps: {} };\n          this.xmlJsToMapByTagname(uri, 'witness');\n          this.$store.dispatch('setSelectedTextTeiData', this.teiData[uri]);\n        } catch (error) {\n          console.error('TextViewer: loadXML:', error);\n        }\n      }\n    },\n    // add ids to each TEI element\n    xmlJsAddIDs(el) {\n      const e0 = el;\n      e0.elementID = this.teiElementID;\n      this.teiElementID += 1;\n      if (e0.elements) {\n        e0.elements.forEach((e1) => {\n          this.xmlJsAddIDs(e1);\n        });\n      }\n    },\n    // find a element by a tagname\n    xmlJsGetObjectByTagname(uri, tagname) {\n      if (this.teiData[uri].els[tagname] === undefined) {\n        this.xmlJsGetObjectsByTagnameInit(uri, tagname);\n      }\n      if (this.teiData[uri].els[tagname].length > 0) {\n        return this.teiData[uri].els[tagname][0];\n      }\n      return null;\n    },\n    // find elements by a tagname\n    xmlJsGetObjectsByTagname(uri, tagname) {\n      if (this.teiData[uri].els[tagname] === undefined) {\n        this.xmlJsGetObjectsByTagnameInit(uri, tagname);\n      }\n      return this.teiData[uri].els[tagname];\n    },\n    xmlJsGetObjectsByTagnameInit(uri, tagname) {\n      const r = [];\n      const walk = (obj) => {\n        if (!obj.elements) {\n          return;\n        }\n        obj.elements.forEach((o) => {\n          if (o.name === tagname) {\n            r.push(o);\n          } else {\n            walk(o);\n          }\n        });\n      };\n      walk(this.xmlData[uri]);\n      this.teiData[uri].els[tagname] = r;\n    },\n    // create a key(#xml:id)-value map by a tagname\n    xmlJsToMapByTagname(uri, tagname) {\n      const map = {};\n      this.xmlJsGetObjectsByTagname(uri, tagname).forEach((o) => {\n        map[`#${o.attributes['xml:id']}`] = this.xmlJsToText(o);\n      });\n      this.teiData[uri].maps[tagname] = map;\n    },\n    // get prettified json string\n    jsonPrettify(obj) {\n      if (!obj) {\n        return '';\n      }\n      return xmlJs.json2xml(obj, {\n        spaces: 2,\n        fullTagEmptyElement: true,\n        indentCdata: true,\n        indentAttributes: true,\n      });\n    },\n    // convert json to string\n    xmlJsToText(obj) {\n      return obj.elements.reduce(this.xmlJsToTextWalk, '');\n    },\n    xmlJsToTextWalk(prev, curr) {\n      if (curr.type === 'text') {\n        return `${prev}${curr.text}`;\n      }\n      return curr.elements.reduce(this.xmlJsToTextWalk, prev);\n    },\n  },\n  mounted() {\n    // this.initCETEIcean();\n  },\n  watch: {\n    selectedText: {\n      handler() {\n        this.resetText();\n      },\n      deep: true,\n    },\n    selectedXMLIndex: {\n      handler(idx) {\n        if (idx !== null) {\n          this.loadXML();\n        }\n      },\n      deep: true,\n    },\n  },\n};\n</script>\n","<template>\n  <div class=\"tategaki\">\n    <TeiNodes :el=\"this.el\" :parents=\"this.parents\"></TeiNodes>\n  </div>\n</template>\n\n<script>\nimport TeiNodes from '@/components/TeiNodes.vue';\n\nexport default {\n  name: 'Tei',\n  components: {\n    TeiNodes,\n  },\n  props: {\n    el: { type: Object, default: null, required: true },\n    parents: { type: Array, default: () => [], required: false },\n  },\n  computed: {\n    selectedText() {\n      return this.$store.state.selectedText;\n    },\n  },\n  watch: {\n    el() {\n      console.debug(111, 'watch: el', this.el);\n    },\n  },\n  mounted() {\n    // ??: -1000 size got to be set with 'nextTick' or other...\n    setTimeout(() => {\n      if (this.$el !== null && this.parents.length === 0) {\n        const el = this.$el.parentNode;\n        if (el.scrollWidth !== 0) {\n          el.scrollLeft = el.scrollWidth;\n        }\n      }\n    }, 100);\n  },\n};\n</script>\n\n<style scoped>\n.tategaki {\n  text-align: left;\n  writing-mode: vertical-tb;\n  -webkit-writing-mode: vertical-tb;\n  -ms-writing-mode: vertical-tb;\n  writing-mode: vertical-rl;\n  -webkit-writing-mode: vertical-rl;\n  -ms-writing-mode: vertical-rl;\n  text-orientation: upright;\n}\n</style>\n","import { render } from \"./Tei.vue?vue&type=template&id=671819ce&scoped=true\"\nimport script from \"./Tei.vue?vue&type=script&lang=js\"\nexport * from \"./Tei.vue?vue&type=script&lang=js\"\n\nimport \"./Tei.vue?vue&type=style&index=0&id=671819ce&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/mkunten/dev/src/github.com/mkunten/textwg/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-671819ce\"]])\n\nexport default __exports__","import { render } from \"./TextViewer.vue?vue&type=template&id=3d9cbdc6\"\nimport script from \"./TextViewer.vue?vue&type=script&lang=js\"\nexport * from \"./TextViewer.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/mkunten/dev/src/github.com/mkunten/textwg/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ImageViewer.vue?vue&type=template&id=83f8733e&scoped=true\"\nimport script from \"./ImageViewer.vue?vue&type=script&lang=js\"\nexport * from \"./ImageViewer.vue?vue&type=script&lang=js\"\n\nimport \"./ImageViewer.vue?vue&type=style&index=0&id=83f8733e&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/mkunten/dev/src/github.com/mkunten/textwg/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-83f8733e\"]])\n\nexport default __exports__","import { render } from \"./Home.vue?vue&type=template&id=ee5d22fc\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/mkunten/dev/src/github.com/mkunten/textwg/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createRouter, createWebHistory } from 'vue-router';\nimport Home from '../views/Home.vue';\n\nconst routes = [\n  {\n    path: '/',\n    name: 'Home',\n    component: Home,\n  },\n  // {\n  //   path: '/about',\n  //   name: 'About',\n  //   // route level code-splitting\n  //   // this generates a separate chunk (about.[hash].js) for this route\n  //   // which is lazy-loaded when the route is visited.\n  //   component: () => import(/* webpackChunkName: \"about\" */ '../views/About.vue'),\n  // },\n];\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes,\n});\n\nexport default router;\n","export default {\n  accept: 'はい',\n  reject: 'いいえ',\n  choose: '選択',\n  upload: 'アップロード',\n  cancel: 'キャンセル',\n  dayNames: ['日曜日', '月曜日', '火曜日', '水曜日', '木曜日', '金曜日', '土曜日'],\n  dayNamesShort: ['日', '月', '火', '水', '木', '金', '土'],\n  dayNamesMin: ['日', '月', '火', '水', '木', '金', '土'],\n  monthNames: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\n  monthNamesShort: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\n  today: '今日',\n  clear: 'クリア',\n  weekHeader: '週',\n  firstDayOfWeek: 0,\n  dateFormat: 'yy/mm/dd',\n  weak: '弱い',\n  medium: '普通',\n  strong: '強い',\n  passwordPrompt: 'パスワードを入力',\n};\n","/* eslint-disable import/order */\nimport { createApp } from 'vue';\nimport App from './App.vue';\nimport store from './store';\nimport router from './router';\n\nimport mdiVue from 'mdi-vue/v3';\nimport * as mdijs from '@mdi/js';\nimport PrimeVue from 'primevue/config';\nimport Button from 'primevue/button';\nimport InputText from 'primevue/inputtext';\nimport SelectButton from 'primevue/selectbutton';\nimport 'primevue/resources/themes/mdc-light-indigo/theme.css';\nimport 'primevue/resources/primevue.min.css';\nimport 'primeicons/primeicons.css';\nimport 'primeflex/primeflex.min.css';\n\n/* eslint-disable-next-line import/extensions */\nimport ja from '@/i18n/locale/ja.js';\n/* eslint-enable import/order */\n\n// app\ncreateApp(App)\n  .use(store)\n  .use(router)\n  .use(mdiVue, { icons: mdijs })\n  .use(PrimeVue, { locale: ja })\n  .component('Button', Button)\n  .component('InputText', InputText)\n  .component('SelectButton', SelectButton)\n  .mount('#app');\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TeiApp.vue?vue&type=style&index=0&id=cfdb28d8&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Mirador3.vue?vue&type=style&index=0&id=8b3f6038&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ImageViewer.vue?vue&type=style&index=0&id=83f8733e&scoped=true&lang=css\"","<template>\n  <span\n    class=\"tei-lem\"\n    title=\"異読\"\n    :lem=\"lem\"\n    @click.prevent=\"toggleOlp\"\n  >\n    <mdicon name=\"information-outline\" size=\"18\"></mdicon>\n    <TeiNodes :el=\"this.lem\" :parents=\"this.childParents\"></TeiNodes>\n  </span>\n  <OverlayPanel ref=\"op\">\n    <div class=\"tategaki\">\n      {{ this.formatLabel(this.lem.attributes.wit) }}\n      <TeiNodes :el=\"this.lem\" :parents=\"this.childParents\"></TeiNodes>\n      <div\n        v-for=\"el in this.rdgs\"\n        :key=\"el.elementID\"\n      >\n        {{ this.formatLabel(el.attributes.wit) }}\n        <TeiNodes :el=\"el\" :parents=\"this.childParents\"></TeiNodes>\n      </div>\n    </div>\n  </OverlayPanel>\n</template>\n\n<script>\nimport { defineAsyncComponent } from 'vue';\nimport OverlayPanel from 'primevue/overlaypanel';\n\nexport default {\n  name: 'TeiApp',\n  components: {\n    OverlayPanel,\n    TeiNodes: defineAsyncComponent(() => import('@/components/TeiNodes.vue')),\n  },\n\n  props: {\n    el: { type: Object, default: null, required: true },\n    parents: { type: Array, default: () => [], required: false },\n  },\n\n  computed: {\n    childParents() {\n      return this.$props.parents.concat('app');\n    },\n    lem() {\n      return this.$props.el.elements.find((el) => el.name === 'lem');\n    },\n    rdgs() {\n      return this.$props.el.elements.filter((el) => el.name === 'rdg');\n    },\n  },\n\n  methods: {\n    formatLabel(wit) {\n      return `【${wit.slice(1)}】`;\n    },\n    toggleOlp(event) {\n      this.$refs.op.toggle(event);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.tategaki {\n  text-align: left;\n  writing-mode: vertical-tb;\n  -webkit-writing-mode: vertical-tb;\n  -ms-writing-mode: vertical-tb;\n  writing-mode: vertical-rl;\n  -webkit-writing-mode: vertical-rl;\n  -ms-writing-mode: vertical-rl;\n  text-orientation: upright;\n}\n.tei-lem {\n  text-underline-position: right; /* required in Firefox */\n  text-decoration: underline dotted red;\n}\n</style>\n","import { render } from \"./TeiApp.vue?vue&type=template&id=cfdb28d8&scoped=true\"\nimport script from \"./TeiApp.vue?vue&type=script&lang=js\"\nexport * from \"./TeiApp.vue?vue&type=script&lang=js\"\n\nimport \"./TeiApp.vue?vue&type=style&index=0&id=cfdb28d8&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/mkunten/dev/src/github.com/mkunten/textwg/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-cfdb28d8\"]])\n\nexport default __exports__","<script>\nimport {\n  resolveComponent,\n  computed,\n  toRef,\n  h,\n} from 'vue';\nimport { useStore } from 'vuex';\nimport TeiApp from '@/components/TeiApp.vue';\n\nexport default {\n  name: 'TeiNodes',\n\n  components: {\n    TeiApp,\n  },\n\n  props: {\n    el: { type: Object, default: null, required: true },\n    parents: { type: Array, default: () => [], required: false },\n  },\n\n  setup(props) {\n    // store\n    const store = useStore();\n\n    // components\n    const mdicon = resolveComponent('mdicon');\n    const TeiNodes = resolveComponent('TeiNodes');\n\n    // props\n    const elRef = toRef(props, 'el');\n    const parentsRef = toRef(props, 'parents');\n\n    // computed\n    const className = computed(() => `tei-${elRef.value.name}`);\n\n    // methods\n    const renderChild = (el) => h(\n      TeiNodes,\n      {\n        el,\n        parents: parentsRef.value.concat(elRef.value.name),\n      },\n    );\n\n    const jumpToByCanvasId = (canvasId) => {\n      store.dispatch('setM3Param', {\n        key: 'canvasId',\n        value: canvasId,\n      });\n    };\n\n    const jumpToByFacs = (facs) => {\n      if (/\\/\\/kotenseki.nijl.ac.jp\\/biblio\\/\\d+\\/viewer\\/(\\d+)/.test(facs)) {\n        const frame = parseInt(RegExp.$1, 10) - 1;\n        store.dispatch('setM3Param', {\n          key: 'frame',\n          value: frame,\n        });\n      }\n    };\n\n    // render\n    let vnodes = null;\n\n    switch (elRef.value.type) {\n      case 'text':\n        if (elRef.value.text) {\n          vnodes = h('span', elRef.value.text);\n        }\n        break;\n      case 'element':\n        switch (elRef.value.name) {\n          case 'pb':\n            if (elRef.value.attributes.n) {\n              vnodes = h(\n                'span',\n                { class: className },\n                `【${elRef.value.attributes.n}】`,\n              );\n            }\n            if (elRef.value.attributes.facs) {\n              vnodes = [\n                h(\n                  'a',\n                  {\n                    class: className,\n                    target: '_blank',\n                    title: '外部サイトを開く',\n                    href: elRef.value.attributes.facs,\n                  },\n                  h(mdicon, { name: 'open-in-new' }),\n                ), h(\n                  mdicon,\n                  {\n                    name: 'book-open-page-variant-outline',\n                    title: 'ビューア上で移動',\n                    onClick: (e) => {\n                      jumpToByFacs(elRef.value.attributes.facs);\n                      e.preventDefault();\n                    },\n                  },\n                ),\n              ];\n            }\n            break;\n          case 'lb':\n            vnodes = h('br', { class: className });\n            break;\n          case 'graphic':\n            if (elRef.value.attributes.n) {\n              vnodes = h(\n                mdicon,\n                {\n                  name: 'book-open-page-variant-outline',\n                  title: 'ビューワ上で移動',\n                  onClick: (e) => {\n                    jumpToByCanvasId(elRef.value.attributes.n);\n                    e.preventDefault();\n                  },\n                },\n              );\n            }\n            break;\n          case 'app':\n            vnodes = h(\n              TeiApp,\n              {\n                el: elRef.value,\n                parents: parentsRef.value,\n              },\n            );\n            break;\n          default:\n            if (elRef.value.elements) {\n              vnodes = elRef.value.elements.map((el) => renderChild(el));\n            }\n            break;\n        }\n        break;\n      case 'cdata':\n        break;\n      case 'comment':\n        break;\n      default:\n        // eslint-disable-next-line\n        console.error('TeiNodes: unexpected type:', elRef.value);\n        break;\n    }\n    return () => vnodes;\n  },\n};\n</script>\n","import script from \"./TeiNodes.vue?vue&type=script&lang=js\"\nexport * from \"./TeiNodes.vue?vue&type=script&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"sourceRoot":""}