(function(e){function t(t){for(var a,c,s=t[0],l=t[1],o=t[2],u=0,b=[];u<s.length;u++)c=s[u],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&b.push(i[c][0]),i[c]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(b.length)b.shift()();return r.push.apply(r,o||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,c=1;c<n.length;c++){var l=n[c];0!==i[l]&&(a=!1)}a&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},i={app:0},r=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-73e4ce1c":"45266451","chunk-043f1d80":"db098a45","chunk-138fdd6a":"ddc072b9","chunk-2d0a3357":"b7ee1b52","chunk-2d0b5d49":"1fbec5e5","chunk-2d213e3a":"6ae3dbe8","chunk-5dbea897":"b2ba0cbc"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=i[e]=[t,a]}));t.push(n[2]=a);var r,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var o=new Error;r=function(t){l.onerror=l.onload=null,clearTimeout(u);var n=i[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;o.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",o.name="ChunkLoadError",o.type=a,o.request=r,n[1](o)}i[e]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:l})}),12e4);l.onerror=l.onload=r,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/textwg/",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=o;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"018e":function(e,t,n){},"0c22":function(e,t,n){},1:function(e,t){},2:function(e,t){},"203b":function(e,t,n){"use strict";n("c3af")},"377c":function(e,t,n){"use strict";n("3d27")},"3d27":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),i={id:"app"};function r(e,t){var n=Object(a["G"])("router-view");return Object(a["y"])(),Object(a["h"])("div",i,[Object(a["l"])(n)])}n("377c");var c=n("6b0d"),s=n.n(c);const l={},o=s()(l,[["render",r]]);var u=o,d=n("5502"),b=Object(d["a"])({state:{m3:null,bid:null,selectedText:{},m3Param:{},texts:[{provider:"NIJL",items:[{title:"十六夜日記 corrected",manifestURI:"https://kotenseki.nijl.ac.jp/biblio/200003074/manifest",xmls:[{label:"上",uri:"texts/200003074.xml"},{label:"下",uri:"https://raw.githubusercontent.com/TEI-EAJ/jpn_classical/master/%E2%91%A1%E6%A0%A1%E8%A8%82%E6%9C%AC%E6%96%87%E3%83%87%E3%83%BC%E3%82%BF%E5%9B%BD%E6%96%87%E5%AD%A6%E7%A0%94%E7%A9%B6%E8%B3%87%E6%96%99%E9%A4%A8%E6%89%80%E8%94%B5%E3%80%8E%E5%8D%81%E5%85%AD%E5%A4%9C%E7%89%A9%E8%AA%9E%E3%80%8F%E4%B8%8B%E5%B7%BB.xml"}]},{title:"源氏物語",manifestURI:"https://nakamura196.github.io/jpsearch/data/genji/manifest/01.json",xmls:[{label:"第1冊",uri:"https://tei-eaj.github.io/parallel_text_viewer/data/pt/01.xml"}]}]},{provider:"KU-ORCAS",items:[{title:"廣瀬本万葉集",manifestURI:"https://www.iiif.ku-orcas.kansai-u.ac.jp/iiif/books/210464810/manifest.json",xmls:[{label:"210464810",uri:"https://raw.githubusercontent.com/KU-ORCAS/manyoshuTEI/main/manyo_hirose_v02_85_140a.xml"}]}]}]},getters:{},mutations:{setM3:function(e,t){e.m3=t,console.info("store: setM3:",t)},setSelectedText:function(e,t){e.selectedText=t,console.info("store: setSelectedText:",e.selectedText)},setM3Param:function(e,t){e.m3Param=t,console.info("store: setM3Param:",t)}},actions:{setM3Param:function(e,t){var n=e.commit;n("setM3Param",t)}}}),f=n("6c02"),m=Object(a["i"])("p",{class:"fixed top-0 right-0"},"202200301001",-1);function p(e,t,n,i,r,c){var s=Object(a["G"])("ImageViewer");return Object(a["y"])(),Object(a["h"])(a["a"],null,[m,Object(a["l"])(s)],64)}var h={class:"miradorviewer"},j={class:"textviewer"};function O(e,t,n,i,r,c){var s=Object(a["G"])("DropDown"),l=Object(a["G"])("mdicon"),o=Object(a["G"])("SelectButton"),u=Object(a["G"])("Mirador3"),d=Object(a["G"])("SplitterPanel"),b=Object(a["G"])("TextViewer"),f=Object(a["G"])("Splitter");return Object(a["y"])(),Object(a["h"])(a["a"],null,[Object(a["l"])(s,{modelValue:c.selectedText,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.selectedText=e}),options:c.texts,optionLabel:"title",optionGroupChildren:"items",optionGroupLabel:"provider"},null,8,["modelValue","options"]),Object(a["l"])(o,{modelValue:r.layout,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.layout=e}),options:r.layoutOptions,optionValue:"value"},{option:Object(a["Q"])((function(e){return[Object(a["l"])(l,{name:e.option.icon},null,8,["name"])]})),_:1},8,["modelValue","options"]),Object(a["l"])(f,{layout:r.layout},{default:Object(a["Q"])((function(){return[Object(a["l"])(d,null,{default:Object(a["Q"])((function(){return[Object(a["i"])("div",h,[Object(a["l"])(u,{"mirador-id":"mirador"})])]})),_:1}),Object(a["l"])(d,null,{default:Object(a["Q"])((function(){return[Object(a["i"])("div",j,[Object(a["l"])(b)])]})),_:1})]})),_:1},8,["layout"])],64)}var v=n("3835"),x=n("0100"),g=n("237b"),y=n("1e02"),I=["id"];function w(e,t,n,i,r,c){return Object(a["y"])(),Object(a["h"])("div",{id:this.miradorId,class:"mirador"},null,8,I)}var T=n("2909"),k=n("0fb5"),M=n("65b9"),_={name:"Mirador3",props:["miradorId"],data:function(){return{}},computed:{m3:function(){return this.$store.state.m3},selectedText:function(){return this.$store.state.selectedText},texts:function(){return this.$store.state.texts},m3Param:function(){return this.$store.state.m3Param}},methods:{getM3Window:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"windowDefault";return this.m3.store.getState().windows[e]},getM3ManifestJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"windowDefault",t=this.m3.store.getState();return t.manifests[t.windows[e].manifestId].json},initM3:function(){var e=window.Mirador.viewer({language:"ja",id:this.miradorId,window:{sideBarOpenByDefault:!1}});k["a"].viewer(e,Object(T["a"])(M["a"])),this.$store.commit("setM3",e),window.m3=e},setM3Text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"windowDefault";null!==this.getM3Window(t)?this.m3.store.dispatch(window.Mirador.actions.addWindow({id:t,manifestId:e.manifestURI})):(console.info("m3 update"),this.m3.store.dispatch(window.Mirador.actions.updateWindow(t,{manifestId:e.manifestURI})))},setM3CanvasById:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"windowDefault";this.m3.store.dispatch(window.Mirador.actions.setCanvas(t,e))},setM3CanvasBySeqIdx:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"windowDefault";this.setM3CanvasById(this.getM3ManifestJSON(t).sequences[0].canvases[e]["@id"])}},mounted:function(){this.initM3()},watch:{selectedText:{handler:function(e){this.setM3Text(e)},deep:!0},m3Param:{handler:function(e){switch(e.key){case"seqIdx":this.setM3CanvasBySeqIdx(e.value);break;case"canvasId":this.setM3CanvasById(e.value);break;default:console.error("unexpected setParam key")}},deep:!0}}};n("203b");const E=s()(_,[["render",w],["__scopeId","data-v-79158e6b"]]);var A=E,S=(n("b0c0"),{style:{"margin-top":"1rem"}}),G={key:0},L={key:1},D=Object(a["k"])(" no data (e.g. "),P=Object(a["i"])("code",null,"witness",-1),C=Object(a["k"])(", "),B=Object(a["i"])("code",null,"app",-1),$=Object(a["k"])(") "),N=[D,P,C,B,$],R=Object(a["i"])("span",{class:"text-sm"},"Text",-1),X={class:"text-sm"},V=Object(a["i"])("br",null,null,-1),J=Object(a["k"])(" manifestURI: "),Q=["href"],K=Object(a["i"])("span",{class:"text-sm"},"TEI/XML",-1),q={class:"text-sm"},W=Object(a["i"])("br",null,null,-1),U=Object(a["k"])(" uri: "),F=["href"];function H(e,t,n,i,r,c){var s=this,l=Object(a["G"])("AutoComplete"),o=Object(a["G"])("Card"),u=Object(a["G"])("AccordionTab"),d=Object(a["G"])("Accordion"),b=Object(a["G"])("SideBar"),f=Object(a["G"])("mdicon"),m=Object(a["G"])("Tei"),p=Object(a["G"])("ScrollPanel"),h=Object(a["G"])("TabPanel"),j=Object(a["G"])("TabView");return Object(a["y"])(),Object(a["h"])(a["a"],null,[Object(a["l"])(b,{style:{width:"80%"},visible:r.visibleRight,"onUpdate:visible":t[1]||(t[1]=function(e){return r.visibleRight=e}),position:"right",closeButton:"true"},{default:Object(a["Q"])((function(){return[Object(a["l"])(d,{multiple:"",activeIndex:[0,1],lazy:""},{default:Object(a["Q"])((function(){return[Object(a["l"])(u,{header:"TEI nodes viewer"},{default:Object(a["Q"])((function(){return[Object(a["l"])(o,null,{content:Object(a["Q"])((function(){return[Object(a["l"])(l,{modelValue:r.tnvFilter,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.tnvFilter=e}),suggestions:r.tnvSuggestions,field:"name",onComplete:c.tnvSearch,onItemSelect:c.tnvOnSelected,autoHighlight:"",completeOnFocus:"",forceSelection:"",placeholder:"input tag name or #xml:id"},{item:Object(a["Q"])((function(e){return[Object(a["i"])("div",null,[Object(a["k"])(Object(a["K"])(e.item.name)+" ",1),e.item.count?(Object(a["y"])(),Object(a["h"])(a["a"],{key:0},[Object(a["k"])(" ("+Object(a["K"])(e.item.count)+") ",1)],64)):Object(a["g"])("",!0)])]})),_:1},8,["modelValue","suggestions","onComplete","onItemSelect"]),Object(a["i"])("div",S,[r.tnvSelected?(Object(a["y"])(),Object(a["h"])("pre",G,Object(a["K"])(s.jsonPrettify({type:"element",name:"data",elements:s.tnvResult})),1)):(Object(a["y"])(),Object(a["h"])("span",L,N))])]})),_:1})]})),_:1}),Object(a["l"])(u,{header:"Metadata"},{default:Object(a["Q"])((function(){return[Object(a["l"])(o,null,{title:Object(a["Q"])((function(){return[R]})),content:Object(a["Q"])((function(){return[Object(a["i"])("div",X,[Object(a["k"])(" title: "+Object(a["K"])(s.selectedText.title),1),V,J,Object(a["i"])("a",{class:"text-sm",target:"_blank",href:s.selectedText.manifestURI},Object(a["K"])(s.selectedText.manifestURI),9,Q)])]})),_:1}),Object(a["l"])(o,null,{title:Object(a["Q"])((function(){return[K]})),content:Object(a["Q"])((function(){return[Object(a["i"])("div",q,[Object(a["k"])(" label: "+Object(a["K"])(s.selectedXML.label),1),W,U,Object(a["i"])("a",{class:"text-sm",target:"_blank",href:s.selectedXML.uri},Object(a["K"])(s.selectedXML.uri),9,F)])]})),_:1})]})),_:1}),Object(a["l"])(u,{header:"TEI Header"},{default:Object(a["Q"])((function(){return[Object(a["l"])(o,null,{content:Object(a["Q"])((function(){return[Object(a["i"])("pre",null,Object(a["K"])(s.jsonPrettify(s.xmlJsGetObjectByTagname(s.selectedXML.uri,"teiHeader"))),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["visible"]),Object(a["i"])("div",null,[Object(a["i"])("span",null,Object(a["K"])(this.selectedText.title),1),Object(a["l"])(f,{name:"menu",class:"absolute right-0",onClick:t[2]||(t[2]=function(e){return s.visibleRight=!s.visibleRight})})]),Object(a["l"])(j,{activeIndex:r.tabActiveIndex,"onUpdate:activeIndex":t[3]||(t[3]=function(e){return r.tabActiveIndex=e}),onTabChange:c.onTabChanged},{default:Object(a["Q"])((function(){return[(Object(a["y"])(!0),Object(a["h"])(a["a"],null,Object(a["E"])(c.selectedText.xmls,(function(e){return Object(a["y"])(),Object(a["f"])(h,{key:e.label,header:e.label},{default:Object(a["Q"])((function(){return[Object(a["l"])(p,{style:{width:"100%",height:"100%"}},{default:Object(a["Q"])((function(){return[r.data[e.uri]?(Object(a["y"])(),Object(a["f"])(m,{key:0,el:s.data[e.uri].xml.elements[0].elements[1]},null,8,["el"])):Object(a["g"])("",!0)]})),_:2},1024)]})),_:2},1032,["header"])})),128))]})),_:1},8,["activeIndex","onTabChange"])],64)}var z=n("1da1"),Y=(n("96cf"),n("99af"),n("d81d"),n("b64b"),n("2ca0"),n("d3b7"),n("159b"),n("4e82"),n("4de4"),n("bc3a")),Z=n.n(Y),ee=n("c51a"),te=n.n(ee),ne=n("de53"),ae=n("c8c8"),ie=n("4084"),re=n("9899"),ce=n("ae1f"),se=n("427bd"),le=n("c982"),oe=n("eeae"),ue={class:"tategaki"};function de(e,t,n,i,r,c){var s=Object(a["G"])("TeiNodes");return Object(a["y"])(),Object(a["h"])("div",ue,[Object(a["l"])(s,{el:this.el,parents:this.parents},null,8,["el","parents"])])}var be=n("cf51"),fe={name:"Tei",components:{TeiNodes:be["default"]},props:{el:{type:Object,default:null,required:!0},parents:{type:Array,default:function(){return[]},required:!1}},computed:{selectedText:function(){return this.$store.state.selectedText}},watch:{el:function(){console.debug(111,"watch: el",this.el)}},mounted:function(){var e=this;setTimeout((function(){if(null!==e.$el&&0===e.parents.length){var t=e.$el.parentNode;0!==t.scrollWidth&&(t.scrollLeft=t.scrollWidth)}}),100)}};n("5a6a");const me=s()(fe,[["render",de],["__scopeId","data-v-c9697106"]]);var pe=me,he={name:"TextViewer",components:{Accordion:ne["a"],AccordionTab:ae["a"],AutoComplete:ie["a"],Card:re["a"],SideBar:se["a"],ScrollPanel:ce["a"],TabPanel:le["a"],TabView:oe["a"],Tei:pe},data:function(){return{visibleRight:!1,tabActiveIndex:0,selectedXMLIndex:null,data:{},tnvFilter:"",tnvSuggestions:[],tnvSelected:""}},computed:{m3:function(){return this.$store.state.m3},selectedText:function(){return this.$store.state.selectedText},selectedXML:function(){return null===this.selectedXMLIndex?null:this.selectedText.xmls[this.selectedXMLIndex]},selectedData:function(){return null===this.selectedXML||void 0===this.data[this.selectedXML.uri]?null:this.data[this.selectedXML.uri]},tnvSuggestionsAll:function(){return this.selectedData.tei.list.concat(Object.keys(this.selectedData.tei.xmlIDs).map((function(e){return{name:e}})))},tnvResult:function(){return this.tnvSelected.startsWith("#")?(console.log(this.selectedData.tei.xmlIDs[this.tnvSelected]),[this.selectedData.tei.xmlIDs[this.tnvSelected]]):this.xmlJsGetObjectsByTagname(this.selectedXML.uri,this.tnvSelected)}},watch:{selectedText:{handler:function(){this.resetText()},deep:!0},selectedXMLIndex:{handler:function(e){null!==e&&this.loadXML()},deep:!0}},provide:function(){var e=this;return{getXMLIDs:function(){return e.selectedData.tei.xmlIDs}}},methods:{resetText:function(){var e=this;this.xmlLoaded=[],this.selectedXMLIndex=null,this.tabActiveIndex=0,this.$nextTick((function(){e.selectedXMLIndex=0}))},onTabChanged:function(e){this.selectedXMLIndex=e.index},loadXML:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.selectedText.xmls[e.selectedXMLIndex].uri,e.data[n]){t.next=13;break}return t.prev=2,t.next=5,Z.a.get(n);case 5:a=t.sent,i=te.a.xml2js(a.data,{ignoreDeclaration:!0,ignoreInstruction:!0,ignoreComment:!0}),e.data[n]=e.xmlJsInit(i),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),console.error("TextViewer: loadXML:",t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))()},xmlJsInit:function(e){var t=0,n={},a={},i=function e(i){var r=i;r.elementID=t,r.name&&(n[r.name]?n[r.name]+=1:n[r.name]=1),r.attributes&&r.attributes["xml:id"]&&(a["#".concat(r.attributes["xml:id"])]=r),t+=1,r.elements&&r.elements.forEach((function(t){e(t)}))};i(e);var r=Object.keys(n).sort().map((function(e){return{name:e,count:n[e]}}));return console.info("tag list:",r,n,"xml:id",a),{xml:e,tei:{list:r,xmlIDs:a,els:{}}}},xmlJsGetObjectByTagname:function(e,t){return void 0===this.data[e].tei.els[t]&&this.xmlJsGetObjectsByTagnameInit(e,t),this.data[e].tei.els[t].length>0?this.data[e].tei.els[t][0]:null},xmlJsGetObjectsByTagname:function(e,t){return void 0===this.data[e].tei.els[t]&&this.xmlJsGetObjectsByTagnameInit(e,t),this.data[e].tei.els[t]},xmlJsGetObjectsByTagnameInit:function(e,t){var n=[],a=function e(a){a.elements&&a.elements.forEach((function(a){a.name===t?n.push(a):e(a)}))};a(this.data[e].xml),this.data[e].tei.els[t]=n},jsonPrettify:function(e){return e?te.a.json2xml(e,{spaces:2,fullTagEmptyElement:!0,indentCdata:!0,indentAttributes:!0}):""},xmlJsToText:function(e){return e.elements.reduce(this.xmlJsToTextWalk,"")},xmlJsToTextWalk:function(e,t){return"text"===t.type?"".concat(e).concat(t.text):t.elements.reduce(this.xmlJsToTextWalk,e)},tnvSearch:function(e){var t=this;setTimeout((function(){return null===t.selectedXML||void 0===t.data[t.selectedXML.uri]?null:(t.tnvSuggestions=t.tnvSuggestionsAll.filter((function(t){return t.name.startsWith(e.query)})),!0)}),250)},tnvOnSelected:function(e){this.tnvSelected=e.value.name}}};const je=s()(he,[["render",H]]);var Oe=je,ve={name:"ImageViewer",components:{DropDown:x["a"],Splitter:g["a"],SplitterPanel:y["a"],Mirador3:A,TextViewer:Oe},data:function(){return{layout:"horizontal",layoutOptions:[{icon:"view-split-vertical",value:"horizontal"},{icon:"view-split-horizontal",value:"vertical"}]}},computed:{selectedText:{get:function(){return this.$store.state.selectedText},set:function(e){this.$store.commit("setSelectedText",e)}},texts:function(){return this.$store.state.texts}},mounted:function(){var e=this;this.$nextTick((function(){var t=Object(v["a"])(e.texts[0].items,1);e.selectedText=t[0]}))}};n("bb26");const xe=s()(ve,[["render",O],["__scopeId","data-v-83f8733e"]]);var ge=xe,ye={name:"Home",components:{ImageViewer:ge}};const Ie=s()(ye,[["render",p]]);var we=Ie,Te=[{path:"/",name:"Home",component:we}],ke=Object(f["a"])({history:Object(f["b"])("/textwg/"),routes:Te}),Me=ke,_e=n("4b99"),Ee=n("94ed"),Ae=n("9319"),Se=n("bb57"),Ge=n("a5af"),Le=(n("c461"),n("e1ae"),n("4121"),n("22a3"),{accept:"はい",reject:"いいえ",choose:"選択",upload:"アップロード",cancel:"キャンセル",dayNames:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],dayNamesShort:["日","月","火","水","木","金","土"],dayNamesMin:["日","月","火","水","木","金","土"],monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],today:"今日",clear:"クリア",weekHeader:"週",firstDayOfWeek:0,dateFormat:"yy/mm/dd",weak:"弱い",medium:"普通",strong:"強い",passwordPrompt:"パスワードを入力"});Object(a["e"])(u).use(b).use(Me).use(_e["a"],{icons:Ee}).use(Ae["a"],{locale:Le}).component("Button",Se["a"]).component("SelectButton",Ge["a"]).mount("#app")},"5a6a":function(e,t,n){"use strict";n("0c22")},"64ed":function(e,t,n){"use strict";var a=n("ab2b"),i=n.n(a);n.d(t,"default",(function(){return i.a}))},a829:function(e,t,n){"use strict";n("e8c5")},ab2b:function(e,t,n){e.exports={"tei-pb":"TeiNodes_tei-pb_rvXqm"}},bb26:function(e,t,n){"use strict";n("018e")},c3af:function(e,t,n){},cf51:function(e,t,n){"use strict";n.r(t);n("99af"),n("b0c0"),n("ac1f"),n("00b4"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("fb6a"),n("5319"),n("d81d");var a=n("7a23"),i=n("5502"),r=["lem"],c={class:"tategaki"};function s(e,t,n,i,s,l){var o=this,u=Object(a["G"])("mdicon"),d=Object(a["G"])("TeiNodes"),b=Object(a["G"])("OverlayPanel");return Object(a["y"])(),Object(a["h"])(a["a"],null,[Object(a["i"])("span",{class:"tei-lem",title:"異読",lem:l.lem,onClick:t[0]||(t[0]=Object(a["T"])((function(){return l.toggleOlp&&l.toggleOlp.apply(l,arguments)}),["prevent"]))},[Object(a["l"])(u,{name:"information-outline",size:"18"}),Object(a["l"])(d,{el:this.lem,parents:this.childParents},null,8,["el","parents"])],8,r),Object(a["l"])(b,{ref:"op"},{default:Object(a["Q"])((function(){return[Object(a["i"])("div",c,[Object(a["i"])("div",null,[Object(a["k"])(Object(a["K"])(o.formatLabel(o.lem.attributes.wit)),1),Object(a["l"])(d,{el:o.lem,parents:o.childParents},null,8,["el","parents"])]),(Object(a["y"])(!0),Object(a["h"])(a["a"],null,Object(a["E"])(o.rdgs,(function(e){return Object(a["y"])(),Object(a["h"])("div",{key:e.elementID},[Object(a["k"])(Object(a["K"])(o.formatLabel(e.attributes.wit)),1),Object(a["l"])(d,{el:e,parents:o.childParents},null,8,["el","parents"])])})),128))])]})),_:1},512)],64)}n("d3b7"),n("3ca3"),n("ddb0"),n("7db0"),n("4de4"),n("2ca0");var l=n("2db7"),o={name:"TeiApp",components:{OverlayPanel:l["a"],TeiNodes:Object(a["m"])((function(){return Promise.resolve().then(n.bind(null,"cf51"))}))},props:{el:{type:Object,default:null,required:!0},parents:{type:Array,default:function(){return[]},required:!1}},computed:{childParents:function(){return this.$props.parents.concat("app")},lem:function(){return this.$props.el.elements.find((function(e){return"lem"===e.name}))},rdgs:function(){return this.$props.el.elements.filter((function(e){return"rdg"===e.name}))}},methods:{formatLabel:function(e){return"【".concat(e.slice(1),"】")},toggleOlp:function(e){var t=this;this.$refs.op.toggle(e),window.navigator.userAgent.startsWith("Mozilla")&&this.$nextTick((function(){t.$refs.op.container.style.boxSizing="content-box"}))}}},u=(n("a829"),n("6b0d")),d=n.n(u);const b=d()(o,[["render",s],["__scopeId","data-v-404c9a36"]]);var f=b,m={name:"TeiNodes",components:{TeiApp:f},props:{el:{type:Object,default:null,required:!0},parents:{type:Array,default:function(){return[]},required:!1}},setup:function(e){var t=Object(i["b"])(),n=Object(a["N"])(),r=Object(a["G"])("mdicon"),c=Object(a["G"])("TeiNodes"),s={RAW_IMAGE:"raw_image",IIIF_IMAGE:"IIIF_image",CANVAS_ID:"canvasId",KOTENSEKI_NIJL:"kotenseki_nijl",OHTER:"other"},l=Object(a["L"])(e,"el"),o=Object(a["L"])(e,"parents"),u=Object(a["q"])("getXMLIDs"),d=function(e){return Object(a["p"])(c,{el:e,parents:o.value.concat(l.value.name)})},b=function(e){if(/\.(jpg|png|tiff?)\/.*?\/.*?\/.*?\/.*\.(jpg|png|tiff?)$/i.test(e))return{type:s.IIIF_IMAGE};if(/\.(jpg|png|tiff?)$/i.test(e))return{type:s.RAW_IMAGE};if(/\/canvas\/.*?$/.test(e))return{type:s.CANVAS_ID};if(/\/\/kotenseki\.nijl\.ac\.jp\/biblio\/\d+\/viewer\/(\d+)$/.test(e))return{type:s.KOTENSEKI_NIJL,seqIdx:parseInt(RegExp.$1,10)-1};if(/\/\/www\.iiif\.ku-orcas\.kansai-u\.ac\.jp\/iiif\/.*\/page(\d+)$/.test(e)){var t=parseInt(RegExp.$1,10);if(t>=2805960){var n="0000".concat(t-2805916).slice(-4);return console.log({type:s.CANVAS_ID,canvasId:e.replace(/\d+$/,n)}),{type:s.CANVAS_ID,canvasId:e.replace(/\d+$/,n)}}return{type:s.CANVAS_ID}}return{type:s.OTHER}},m=function(e){t.dispatch("setM3Param",{key:"canvasId",value:e})},p=function(e){t.dispatch("setM3Param",{key:"seqIdx",value:e})},h=function(e){var t=b(e);switch(t.type){case s.CANVAS_ID:return Object(a["p"])(r,{name:"book-open-page-variant-outline",title:"ビューワ上で移動",onClick:function(e){m(t.canvasId||l.value.attributes.n),e.preventDefault()}});case s.KOTENSEKI_NIJL:return[Object(a["p"])("a",{target:"_blank",title:"外部サイトを開く",href:l.value.attributes.facs},Object(a["p"])(r,{name:"open-in-new"})),Object(a["p"])(r,{name:"book-open-page-variant-outline",title:"ビューア上で移動",onClick:function(e){p(t.seqIdx),e.preventDefault()}})];case s.RAW_IMAGE:case s.IIIF_IMAGE:return Object(a["p"])("a",{target:"_blank",title:"画像を開く",href:l.value.attributes.facs},Object(a["p"])(r,{name:"file-image-outline"}));case s.OTHER:return Object(a["p"])("a",{target:"_blank",title:"外部サイトを開く",href:l.value.attributes.facs},Object(a["p"])(r,{name:"open-in-new"}));default:return null}},j=function(){return n["tei-".concat(l.value.name)]},O=null;switch(l.value.type){case"text":l.value.text&&(O=Object(a["p"])("span",l.value.text));break;case"element":switch(l.value.name){case"pb":if(O=[Object(a["p"])("br")],l.value.attributes.n&&O.push(Object(a["p"])("span",{class:j()},"【".concat(l.value.attributes.n,"】"))),l.value.attributes.facs){var v=h(l.value.attributes.facs);v&&O.push(v)}if(l.value.attributes.source){var x=u()[l.value.attributes.source];if(x){var g=h(x.attributes.source);g&&O.push(g)}}break;case"lb":O=Object(a["p"])("br",{class:j()});break;case"graphic":l.value.attributes.n&&(O=h(l.value.attributes.n));break;case"app":O=Object(a["p"])(f,{el:l.value,parents:o.value});break;default:l.value.elements&&(O=l.value.elements.map((function(e){return d(e)})));break}break;case"cdata":break;case"comment":break;default:console.error("TeiNodes: unexpected type:",l.value);break}return function(){return O}}},p=n("64ed");const h={};h["$style"]=p["default"];const j=d()(m,[["__cssModules",h]]);t["default"]=j},e8c5:function(e,t,n){}});
//# sourceMappingURL=app.20e4b5ad.js.map