(function(e){function t(t){for(var a,o,c=t[0],s=t[1],l=t[2],d=0,f=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,c=1;c<n.length;c++){var s=n[c];0!==i[s]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},i={app:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/textwg/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"018e":function(e,t,n){},"0293":function(e,t,n){"use strict";n("e6a5")},1:function(e,t){},2:function(e,t){},"297a":function(e,t,n){"use strict";n("9f47")},"377c":function(e,t,n){"use strict";n("3d27")},"3d27":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),i={id:"app"};function r(e,t){var n=Object(a["D"])("router-view");return Object(a["v"])(),Object(a["h"])("div",i,[Object(a["l"])(n)])}n("377c");var o=n("6b0d"),c=n.n(o);const s={},l=c()(s,[["render",r]]);var u=l,d=n("5502"),f=Object(d["a"])({state:{m3:null,bid:null,selectedText:{},param:{},texts:[{provider:"NIJL",items:[{title:"十六夜日記",manifestURI:"https://kotenseki.nijl.ac.jp/biblio/200003074/manifest",xmls:[{label:"上",uri:"https://raw.githubusercontent.com/TEI-EAJ/jpn_classical/master/%E2%91%A1%E6%A0%A1%E8%A8%82%E6%9C%AC%E6%96%87%E3%83%87%E3%83%BC%E3%82%BF%E5%9B%BD%E6%96%87%E5%AD%A6%E7%A0%94%E7%A9%B6%E8%B3%87%E6%96%99%E9%A4%A8%E6%89%80%E8%94%B5%E3%80%8E%E5%8D%81%E5%85%AD%E5%A4%9C%E7%89%A9%E8%AA%9E%E3%80%8F%E4%B8%8A%E5%B7%BB.xml"},{label:"下",uri:"https://raw.githubusercontent.com/TEI-EAJ/jpn_classical/master/%E2%91%A1%E6%A0%A1%E8%A8%82%E6%9C%AC%E6%96%87%E3%83%87%E3%83%BC%E3%82%BF%E5%9B%BD%E6%96%87%E5%AD%A6%E7%A0%94%E7%A9%B6%E8%B3%87%E6%96%99%E9%A4%A8%E6%89%80%E8%94%B5%E3%80%8E%E5%8D%81%E5%85%AD%E5%A4%9C%E7%89%A9%E8%AA%9E%E3%80%8F%E4%B8%8B%E5%B7%BB.xml"}]},{title:"源氏物語",manifestURI:"https://nakamura196.github.io/jpsearch/data/genji/manifest/01.json",xmls:[{label:"第1冊",uri:"https://tei-eaj.github.io/parallel_text_viewer/data/pt/01.xml"}]}]},{provider:"NDL",items:[]}]},getters:{},mutations:{setM3:function(e,t){e.m3=t,console.info("store: setM3:",t)},setSelectedText:function(e,t){e.selectedText=t,console.info("store: setSelectedText:",e.selectedText)},setParam:function(e,t){e.param=t,console.info("store: setParam:",t)}},actions:{setParam:function(e,t){var n=e.commit;n("setParam",t)}}}),b=n("6c02"),p=Object(a["i"])("p",{class:"fixed top-0 right-0"},"v20220127001",-1);function m(e,t,n,i,r,o){var c=Object(a["D"])("ImageViewer");return Object(a["v"])(),Object(a["h"])(a["a"],null,[p,Object(a["l"])(c)],64)}var h={class:"miradorviewer"},v={class:"textviewer"};function j(e,t,n,i,r,o){var c=Object(a["D"])("DropDown"),s=Object(a["D"])("mdicon"),l=Object(a["D"])("SelectButton"),u=Object(a["D"])("Mirador3"),d=Object(a["D"])("SplitterPanel"),f=Object(a["D"])("TextViewer"),b=Object(a["D"])("Splitter");return Object(a["v"])(),Object(a["h"])(a["a"],null,[Object(a["l"])(c,{modelValue:o.selectedText,"onUpdate:modelValue":t[0]||(t[0]=function(e){return o.selectedText=e}),options:o.texts,optionLabel:"title",optionGroupChildren:"items",optionGroupLabel:"provider"},null,8,["modelValue","options"]),Object(a["l"])(l,{modelValue:r.layout,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.layout=e}),options:r.layoutOptions,optionValue:"value"},{option:Object(a["M"])((function(e){return[Object(a["l"])(s,{name:e.option.icon},null,8,["name"])]})),_:1},8,["modelValue","options"]),Object(a["l"])(b,{layout:r.layout},{default:Object(a["M"])((function(){return[Object(a["l"])(d,null,{default:Object(a["M"])((function(){return[Object(a["i"])("div",h,[Object(a["l"])(u,{"mirador-id":"mirador"})])]})),_:1}),Object(a["l"])(d,null,{default:Object(a["M"])((function(){return[Object(a["i"])("div",v,[Object(a["l"])(f)])]})),_:1})]})),_:1},8,["layout"])],64)}var O=n("3835"),x=n("0100"),g=n("237b"),E=n("1e02"),w=["id"];function M(e,t,n,i,r,o){return Object(a["v"])(),Object(a["h"])("div",{id:this.miradorId,class:"mirador"},null,8,w)}var T={name:"Mirador3",props:["miradorId"],data:function(){return{}},computed:{m3:function(){return this.$store.state.m3},selectedText:function(){return this.$store.state.selectedText},texts:function(){return this.$store.state.texts},param:function(){return this.$store.state.param}},methods:{getM3Window:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"windowDefault";return this.m3.store.getState().windows[e]},getM3ManifestJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"windowDefault",t=this.m3.store.getState();return t.manifests[t.windows[e].manifestId].json},initM3:function(){var e=window.Mirador.viewer({language:"ja",id:this.miradorId,window:{sideBarOpenByDefault:!1}});this.$store.commit("setM3",e),window.m3=e},setM3Text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"windowDefault";null!==this.getM3Window(t)?this.m3.store.dispatch(window.Mirador.actions.addWindow({id:t,manifestId:e.manifestURI})):(console.info("m3 update"),this.m3.store.dispatch(window.Mirador.actions.updateWindow(t,{manifestId:e.manifestURI})))},setM3CanvasById:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"windowDefault";this.m3.store.dispatch(window.Mirador.actions.setCanvas(t,e))},setM3CanvasByFrame:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"windowDefault";this.setM3CanvasById(this.getM3ManifestJSON(t).sequences[0].canvases[e]["@id"])}},mounted:function(){this.initM3()},watch:{selectedText:{handler:function(e){this.setM3Text(e)},deep:!0},param:{handler:function(e){switch(e.key){case"frame":this.setM3CanvasByFrame(e.value);break;case"canvasId":this.setM3CanvasById(e.value);break;default:console.error("unexpected setParam key")}},deep:!0}}};n("297a");const y=c()(T,[["render",M],["__scopeId","data-v-25af5c44"]]);var I=y,A=function(e){return Object(a["y"])("data-v-80b97898"),e=e(),Object(a["w"])(),e},B=A((function(){return Object(a["i"])("span",{class:"text-sm"},"Label",-1)})),D={class:"text-sm"},C=A((function(){return Object(a["i"])("span",{class:"text-sm"},"XML URI",-1)})),_={class:"text-sm"},k={target:"_blank",href:"{{ this.selectedXML.uri }}"};function L(e,t,n,i,r,o){var c=this,s=Object(a["D"])("Card"),l=Object(a["D"])("AccordionTab"),u=Object(a["D"])("Accordion"),d=Object(a["D"])("SideBar"),f=Object(a["D"])("mdicon"),b=Object(a["D"])("ScrollPanel"),p=Object(a["D"])("TabPanel"),m=Object(a["D"])("TabView");return Object(a["v"])(),Object(a["h"])(a["a"],null,[Object(a["l"])(d,{visible:r.visibleRight,"onUpdate:visible":t[0]||(t[0]=function(e){return r.visibleRight=e}),position:"right",closeButton:"ture"},{default:Object(a["M"])((function(){return[Object(a["l"])(u,{multiple:"",activeIndex:[0,1],lazy:""},{default:Object(a["M"])((function(){return[Object(a["l"])(l,{header:"XML Metadata"},{default:Object(a["M"])((function(){return[Object(a["l"])(s,null,{title:Object(a["M"])((function(){return[B]})),content:Object(a["M"])((function(){return[Object(a["i"])("span",D,Object(a["H"])(c.selectedXML.label),1)]})),_:1}),Object(a["l"])(s,null,{title:Object(a["M"])((function(){return[C]})),content:Object(a["M"])((function(){return[Object(a["i"])("span",_,[Object(a["i"])("a",k,Object(a["H"])(decodeURIComponent(c.selectedXML.uri)),1)])]})),_:1})]})),_:1}),Object(a["l"])(l,{header:"TEI Header (converted by CETEIcean)"},{default:Object(a["M"])((function(){return[Object(a["l"])(s,null,{content:Object(a["M"])((function(){return[Object(a["i"])("pre",null,Object(a["H"])(c.jsonPrettify(c.teiHeader)),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["visible"]),Object(a["i"])("div",null,[Object(a["i"])("span",null,Object(a["H"])(this.selectedText.title),1),Object(a["l"])(f,{name:"menu",class:"absolute right-0",onClick:t[1]||(t[1]=function(e){return c.visibleRight=!c.visibleRight})})]),Object(a["l"])(m,{ref:"tv",activeIndex:r.tabActiveIndex,"onUpdate:activeIndex":t[3]||(t[3]=function(e){return r.tabActiveIndex=e}),onTabChange:o.onTabChanged},{default:Object(a["M"])((function(){return[(Object(a["v"])(!0),Object(a["h"])(a["a"],null,Object(a["B"])(o.selectedText.xmls,(function(e){return Object(a["v"])(),Object(a["f"])(p,{key:e.label,header:e.label},{default:Object(a["M"])((function(){return[Object(a["l"])(b,{ref:"sp"+e.label,style:{width:"100%",height:"100%"}},{default:Object(a["M"])((function(){return[Object(a["i"])("div",{ref:"viewer".concat(e.label),class:"tategaki",onClick:t[2]||(t[2]=function(){return o.onClick&&o.onClick.apply(o,arguments)})},null,512)]})),_:2},1536)]})),_:2},1032,["header"])})),128))]})),_:1},8,["activeIndex","onTabChange"])],64)}n("ac1f"),n("5319"),n("fb6a");var S=n("bc3a"),P=n.n(S),$=n("c8c86"),H=n("c51a"),V=n.n(H),X=n("de53"),N=n("c8c8"),R=n("9899"),U=n("ae1f"),F=n("427b"),J=n("c982"),W=n("eeae"),z={name:"TextViewer",components:{Accordion:X["a"],AccordionTab:N["a"],Card:R["a"],SideBar:F["a"],ScrollPanel:U["a"],TabPanel:J["a"],TabView:W["a"]},data:function(){return{CETEIcean:null,visibleRight:!1,tabActiveIndex:0,xmlLoaded:null,selectedXMLIndex:null,teiHeader:null,teiData:{}}},computed:{m3:function(){return this.$store.state.m3},selectedText:function(){return this.$store.state.selectedText},selectedXML:function(){return this.selectedText.xmls[this.selectedXMLIndex]}},methods:{getCanvasById:function(e){return this.$store.getters.getCanvasById(e)},initCETEIcean:function(){var e=this;this.CETEIcean=new $["a"]({ignoreFragmentId:!0});var t={tei:{teiHeader:function(t){e.teiHeaderInit(t.outerHTML),t.innerHTML=""},lb:["<br />"],pb:['<a><img class="tei-pb-jumpTo" title="移動" data-facs="$@facs" src="images/book-open-page-variant-outline.svg" /></a><a title="新日本古典籍総合目録DBで開く" target="_blank" href="$@facs"><img src="images/open-in-new.svg" /></a>'],surface:null,graphic:['<a><img class="tei-graphic-jumpTo" title="移動" data-n="$@n" data-url="$@url" src="images/book-open-page-variant-outline.svg" /></a>']}};this.CETEIcean.addBehaviors(t)},resetText:function(){var e=this;this.xmlLoaded=[],this.selectedXMLIndex=null,this.tabActiveIndex=0,this.$nextTick((function(){e.selectedXMLIndex=0}))},loadXML:function(e,t){var n=this;this.xmlLoaded[e]||(this.xmlLoaded[e]=!0,P.a.get(t.uri).then((function(e){n.CETEIcean.makeHTML5(e.data,(function(e){var a=n.$refs["viewer".concat(t.label)];a.append(e),a.parentNode.scrollLeft=a.parentNode.scrollWidth}))})).catch((function(e){console.error("TextViewer: axios: ",e)})))},onClick:function(e){if(e.target.classList.contains("tei-pb-jumpTo")){var t=e.target.dataset.facs.replace(/^.*\/(\d+)/,"$1")-1;this.$store.dispatch("setParam",{key:"frame",value:t}),e.preventDefault()}else if(e.target.classList.contains("tei-graphic-jumpTo")){var n=e.target.dataset.n;this.$store.dispatch("setParam",{key:"canvasId",value:n}),e.preventDefault()}},onTabChanged:function(e){this.selectedXMLIndex=e.index},teiHeaderInit:function(e){this.teiHeader=V.a.xml2js(e,{compact:!0,elementNameFn:function(e){return e.slice(4)}}),console.log(this.teiHeader.teiheader.filedesc.sourcedesc.listwit)},jsonPrettify:function(e){return V.a.json2xml(e,{compact:!0,spaces:2,fullTagEmptyElement:!0,indentCdata:!0,indentAttributes:!0})}},mounted:function(){this.initCETEIcean()},watch:{selectedText:{handler:function(){this.resetText()},deep:!0},selectedXMLIndex:{handler:function(e){null!==e&&this.loadXML(e,this.selectedText.xmls[e])},deep:!0}}};n("0293");const G=c()(z,[["render",L],["__scopeId","data-v-80b97898"]]);var q=G,K={name:"ImageViewer",components:{DropDown:x["a"],Splitter:g["a"],SplitterPanel:E["a"],Mirador3:I,TextViewer:q},data:function(){return{layout:"horizontal",layoutOptions:[{icon:"view-split-vertical",value:"horizontal"},{icon:"view-split-horizontal",value:"vertical"}]}},computed:{selectedText:{get:function(){return this.$store.state.selectedText},set:function(e){this.$store.commit("setSelectedText",e)}},texts:function(){return this.$store.state.texts}},mounted:function(){var e=this;this.$nextTick((function(){var t=Object(O["a"])(e.texts[0].items,1);e.selectedText=t[0]}))}};n("bb26");const Q=c()(K,[["render",j],["__scopeId","data-v-83f8733e"]]);var Y=Q,Z={name:"Home",components:{ImageViewer:Y}};const ee=c()(Z,[["render",m]]);var te=ee,ne=[{path:"/",name:"Home",component:te}],ae=Object(b["a"])({history:Object(b["b"])("/textwg/"),routes:ne}),ie=ae,re=n("4b99"),oe=n("94ed"),ce=n("9319"),se=n("bb57"),le=n("8398"),ue=n("a5af"),de=(n("c461"),n("e1ae"),n("4121"),n("22a3"),{accept:"はい",reject:"いいえ",choose:"選択",upload:"アップロード",cancel:"キャンセル",dayNames:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],dayNamesShort:["日","月","火","水","木","金","土"],dayNamesMin:["日","月","火","水","木","金","土"],monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],today:"今日",clear:"クリア",weekHeader:"週",firstDayOfWeek:0,dateFormat:"yy/mm/dd",weak:"弱い",medium:"普通",strong:"強い",passwordPrompt:"パスワードを入力"});Object(a["e"])(u).use(f).use(ie).use(re["a"],{icons:oe}).use(ce["a"],{locale:de}).component("Button",se["a"]).component("InputText",le["a"]).component("SelectButton",ue["a"]).mount("#app")},"9f47":function(e,t,n){},bb26:function(e,t,n){"use strict";n("018e")},e6a5:function(e,t,n){}});
//# sourceMappingURL=app.a2bbe67c.js.map